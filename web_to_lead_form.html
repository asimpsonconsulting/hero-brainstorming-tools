<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web-to-Lead Form Preview - OneView ToolKit</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f9fafb;
            padding: 40px 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .guide-header {
            text-align: center;
            margin-bottom: 25px;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .guide-header h1 {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 8px;
            color: #1f2937;
        }
        
        .guide-header p {
            font-size: 14px;
            color: #6b7280;
            margin-bottom: 15px;
        }
        
        .navigation {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .nav-link {
            padding: 8px 16px;
            background: #f3f4f6;
            color: #6b7280;
            text-decoration: none;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
            border: 1px solid #e5e7eb;
            transition: all 0.3s;
        }
        
        .nav-link:hover {
            background: #e5e7eb;
            color: #374151;
        }
        
        .main-layout {
            display: grid;
            grid-template-columns: 350px 1fr;
            gap: 30px;
            align-items: start;
        }
        
        .form-panel {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            position: sticky;
            top: 20px;
            max-height: calc(100vh - 40px);
            overflow-y: auto;
        }
        
        .form-panel h2 {
            font-size: 20px;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            font-size: 14px;
            font-weight: 600;
            color: #374151;
            margin-bottom: 8px;
        }
        
        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e5e7eb;
            border-radius: 6px;
            font-size: 14px;
            font-family: inherit;
            transition: border-color 0.2s;
        }
        
        .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
            outline: none;
            border-color: #22c55e;
        }
        
        .form-group textarea {
            height: 80px;
            resize: vertical;
        }
        
        .update-btn {
            width: 100%;
            background: linear-gradient(135deg, #22c55e 0%, #10b981 100%);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 10px;
            box-shadow: 0 4px 12px rgba(34, 197, 94, 0.3);
        }
        
        .update-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(34, 197, 94, 0.4);
        }
        
        .download-btn {
            width: 100%;
            background: linear-gradient(135deg, #3b82f6 0%, #06b6d4 100%);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 10px;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
        }
        
        .download-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(59, 130, 246, 0.4);
        }
        
        .business-impact {
            background: #dcfce7;
            border: 1px solid #bbf7d0;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            font-size: 13px;
            color: #166534;
        }
        
        .form-preview {
            background: #f9fafb;
            border-radius: 16px;
            padding: 0;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            overflow: hidden;
        }
        
        .form-container {
            max-width: 500px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            min-height: 400px;
        }
        
        .variation-label {
            background: linear-gradient(135deg, #22c55e 0%, #10b981 100%);
            color: white;
            padding: 12px 30px;
            font-weight: 600;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            text-align: center;
            border-radius: 8px 8px 0 0;
            margin: -40px -40px 20px -40px;
        }
        
        .form-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .form-eyebrow {
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: #22c55e;
            margin-bottom: 10px;
        }
        
        .form-headline {
            font-size: 32px;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 10px;
            line-height: 1.2;
        }
        
        .form-subheadline {
            font-size: 16px;
            color: #6b7280;
            line-height: 1.5;
        }
        
        .lead-form {
            display: grid;
            gap: 20px;
        }
        
        .form-row {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
        }
        
        .form-row.two-col {
            grid-template-columns: 1fr 1fr;
        }
        
        .field-group {
            position: relative;
        }
        
        .field-label {
            display: block;
            font-size: 13px;
            font-weight: 600;
            color: #374151;
            margin-bottom: 6px;
        }
        
        .field-input {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.2s;
        }
        
        .field-input:focus {
            outline: none;
            border-color: #22c55e;
            box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.1);
        }
        
        .submit-btn {
            background: linear-gradient(135deg, #22c55e 0%, #10b981 100%);
            color: white;
            padding: 16px 32px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 12px rgba(34, 197, 94, 0.3);
        }
        
        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(34, 197, 94, 0.4);
        }
        
        .privacy-text {
            font-size: 12px;
            color: #6b7280;
            text-align: center;
            margin-top: 15px;
            line-height: 1.4;
        }
        
        /* Accent Color Variations */
        .accent-orange-red .field-input:focus {
            border-color: #f97316;
            box-shadow: 0 0 0 3px rgba(249, 115, 22, 0.1);
        }
        
        .accent-orange-red .submit-btn {
            background: linear-gradient(135deg, #f97316 0%, #ef4444 100%);
            box-shadow: 0 4px 12px rgba(249, 115, 22, 0.3);
        }
        
        .accent-orange-red .form-eyebrow {
            color: #f97316;
        }
        
        .accent-orange-red .success-accent-text {
            color: #f97316 !important;
        }
        
        .accent-blue .field-input:focus {
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        
        .accent-blue .submit-btn {
            background: linear-gradient(135deg, #3b82f6 0%, #06b6d4 100%);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
        }
        
        .accent-blue .form-eyebrow {
            color: #3b82f6;
        }
        
        .accent-blue .success-accent-text {
            color: #3b82f6 !important;
        }
        
        @media (max-width: 1200px) {
            .main-layout {
                grid-template-columns: 1fr;
            }
            
            .form-panel {
                position: relative;
                max-height: none;
            }
        }
        
        @media (max-width: 768px) {
            .form-row.two-col {
                grid-template-columns: 1fr;
            }
            
            .form-headline {
                font-size: 24px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="guide-header">
            <h1>💰 Web-to-Lead Form Preview</h1>
            <p>Test and optimize lead capture forms with real-time preview and conversion best practices</p>
            <div class="navigation">
                <a href="index.html" class="nav-link">← OneView ToolKit</a>
                <a href="brainstorm_canvas.html" class="nav-link">Marketing Tools</a>
                <a href="style_guide_hub.html" class="nav-link">📚 Style Guide</a>
            </div>
        </div>
        
        <div class="main-layout">
            <!-- Form Configuration Panel -->
            <div class="form-panel">
                <h2>📝 Form Configuration</h2>
                
                <div style="border-bottom: 1px solid #e5e7eb; padding-bottom: 20px; margin-bottom: 20px;">
                    <h3 style="font-size: 16px; font-weight: 600; color: #1f2937; margin-bottom: 15px;">🎨 Form Accent Color</h3>
                    
                    <div class="form-group">
                        <label>Accent Color</label>
                        <select id="accent-color">
                            <option value="orange-red">Primary Brand (Orange to Red)</option>
                            <option value="green" selected>Success Green</option>
                            <option value="blue">Secondary Blue (Blue to Cyan)</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Form Eyebrow</label>
                    <input type="text" id="form-eyebrow" placeholder="e.g., FREE ANALYSIS" value="GET YOUR FREE">
                </div>
                
                <div class="form-group">
                    <label>Form Headline</label>
                    <input type="text" id="form-headline" placeholder="e.g., Get Your Capacity Analysis" value="Capacity Analysis Report">
                </div>
                
                <div class="form-group">
                    <label>Form Sub-headline</label>
                    <textarea id="form-subheadline" placeholder="Describe what they'll receive...">Get personalized insights on how to optimize your team's engagement capacity for measurable pipeline performance improvements.</textarea>
                </div>
                
                <div class="form-group">
                    <label>Submit Button Text</label>
                    <input type="text" id="submit-text" placeholder="e.g., Get My Analysis" value="Begin turning insights into action">
                </div>
                
                <div class="form-group">
                    <label>Privacy Text</label>
                    <textarea id="privacy-text" placeholder="Privacy policy information...">I consent to OneView Labs processing my personal data to provide the requested analysis and follow-up communications.</textarea>
                </div>
                
                <div style="border-top: 1px solid #e5e7eb; padding-top: 20px; margin-top: 20px;">
                    <h3 style="font-size: 16px; font-weight: 600; color: #1f2937; margin-bottom: 15px;">✅ Success Page Configuration</h3>
                    
                    <div class="form-group">
                        <label>Success Eyebrow</label>
                        <input type="text" id="success-eyebrow" placeholder="e.g., ANALYSIS REQUESTED" value="ANALYSIS REQUESTED">
                    </div>
                    
                    <div class="form-group">
                        <label>Success Headline</label>
                        <input type="text" id="success-headline" placeholder="e.g., Thank you for starting your journey!" value="Thank you for starting your journey!">
                    </div>
                    
                    <div class="form-group">
                        <label>Success Description</label>
                        <textarea id="success-description" placeholder="What happens next...">Our GTM operations experts are preparing your personalized capacity analysis. You'll receive your insights within 2-3 business days.</textarea>
                    </div>
                    
                    <div class="form-group">
                        <label>Contact Email</label>
                        <input type="text" id="contact-email" placeholder="e.g., hello@oneviewlabs.com" value="hello@oneviewlabs.com">
                    </div>
                </div>
                
                <div style="border-top: 1px solid #e5e7eb; padding-top: 20px; margin-top: 20px;">
                    <h3 style="font-size: 16px; font-weight: 600; color: #1f2937; margin-bottom: 15px;">📋 Form Fields</h3>
                    
                    <div class="form-group">
                        <label>Required Fields (select multiple)</label>
                        <select id="required-fields" multiple style="height: 140px;">
                            <option value="first-name" selected>First Name</option>
                            <option value="last-name" selected>Last Name</option>
                            <option value="email" selected>Work Email</option>
                            <option value="company" selected>Company Name</option>
                            <option value="title">Job Title</option>
                            <option value="phone">Phone Number</option>
                            <option value="website">Website URL</option>
                            <option value="team-size">Team Size</option>
                            <option value="revenue">Annual Revenue</option>
                        </select>
                    </div>
                </div>
                
                <div style="border-top: 1px solid #e5e7eb; padding-top: 20px; margin-top: 20px;">
                    <h3 style="font-size: 16px; font-weight: 600; color: #1f2937; margin-bottom: 15px;">❓ Qualifying Questions</h3>
                    
                    <div class="form-group">
                        <label>Question 1 (Optional)</label>
                        <input type="text" id="question-1" placeholder="e.g., What's your primary GTM challenge?" value="What's your primary GTM challenge?">
                    </div>
                    
                    <div class="form-group">
                        <label>Question 1 Options (one per line)</label>
                        <textarea id="question-1-options" placeholder="Pipeline unpredictability
Team capacity bottlenecks
Scaling sales efforts">Pipeline unpredictability
Team capacity bottlenecks
Scaling sales efforts
GTM tool optimization
International expansion
ROI measurement
Other</textarea>
                    </div>
                </div>
                
                <button class="update-btn" onclick="updateFormPreview()">✨ Update Form</button>
                
                <button class="download-btn" onclick="downloadCompletePackage()">📦 Download Complete Package</button>
                
                <div class="business-impact">
                    <strong>Why this matters:</strong> Form optimization can increase lead conversion by 25-40%. Test different headlines, field combinations, accent colors, and layouts to find what converts best. Complete package includes: form screenshot, configuration JSON, HTML template, and Salesforce setup instructions.
                </div>
            </div>
            
            <!-- Form Previews -->
            <div class="form-variations">
                <!-- Form Preview -->
                <div class="form-preview">
                    <div class="variation-label">Lead Capture Form Preview</div>
                    <div class="form-container">
                        <div class="form-header">
                            <div class="form-eyebrow" data-field="form-eyebrow">GET YOUR FREE</div>
                            <h2 class="form-headline" data-field="form-headline">Capacity Analysis Report</h2>
                            <p class="form-subheadline" data-field="form-subheadline">Get personalized insights on how to optimize your team's engagement capacity for measurable pipeline performance improvements.</p>
                        </div>
                        
                        <form class="lead-form">
                            <div class="form-row two-col">
                                <div class="field-group" data-field="first-name">
                                    <label class="field-label">First Name *</label>
                                    <input type="text" class="field-input" placeholder="John" required>
                                </div>
                                <div class="field-group" data-field="last-name">
                                    <label class="field-label">Last Name *</label>
                                    <input type="text" class="field-input" placeholder="Smith" required>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="field-group" data-field="email">
                                    <label class="field-label">Work Email *</label>
                                    <input type="email" class="field-input" placeholder="john.smith@company.com" required>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="field-group" data-field="company">
                                    <label class="field-label">Company *</label>
                                    <input type="text" class="field-input" placeholder="Acme Corp" required>
                                </div>
                            </div>
                            
                            <!-- Optional Fields -->
                            <div class="form-row" data-field="title" style="display: none;">
                                <div class="field-group">
                                    <label class="field-label">Job Title</label>
                                    <input type="text" class="field-input" placeholder="VP of Sales">
                                </div>
                            </div>
                            
                            <div class="form-row" data-field="phone" style="display: none;">
                                <div class="field-group">
                                    <label class="field-label">Phone Number</label>
                                    <input type="tel" class="field-input" placeholder="(555) 123-4567">
                                </div>
                            </div>
                            
                            <div class="form-row" data-field="website" style="display: none;">
                                <div class="field-group">
                                    <label class="field-label">Website URL</label>
                                    <input type="url" class="field-input" placeholder="https://company.com">
                                </div>
                            </div>
                            
                            <div class="form-row" data-field="team-size" style="display: none;">
                                <div class="field-group">
                                    <label class="field-label">Team Size</label>
                                    <select class="field-input">
                                        <option>Select team size</option>
                                        <option>1-10 employees</option>
                                        <option>11-50 employees</option>
                                        <option>51-200 employees</option>
                                        <option>201-500 employees</option>
                                        <option>500+ employees</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="form-row" data-field="revenue" style="display: none;">
                                <div class="field-group">
                                    <label class="field-label">Annual Revenue</label>
                                    <select class="field-input">
                                        <option>Select revenue range</option>
                                        <option>Under $1M</option>
                                        <option>$1M - $5M</option>
                                        <option>$5M - $25M</option>
                                        <option>$25M - $100M</option>
                                        <option>$100M+</option>
                                    </select>
                                </div>
                            </div>
                            
                            <!-- Dynamic Qualifying Questions -->
                            <div class="form-row" data-field="question-1" style="display: none;">
                                <div class="field-group">
                                    <label class="field-label" data-field="question-1-label">What's your primary GTM challenge? *</label>
                                    <select class="field-input" data-field="question-1-select">
                                        <option value="">Select option</option>
                                    </select>
                                </div>
                            </div>
                            
                            <button type="submit" class="submit-btn" data-field="submit-text">Begin turning insights into action</button>
                        </form>
                        
                        <p class="privacy-text" data-field="privacy-text">I consent to OneView Labs processing my personal data to provide the requested analysis and follow-up communications.</p>
                    </div>
                </div>
                
                <!-- Success Page Preview -->
                <div class="form-preview">
                    <div class="variation-label">Success Page Preview</div>
                    <div class="form-container" style="text-align: center; padding: 40px;">
                        <!-- Success Icon -->
                        <div style="width: 80px; height: 80px; background: linear-gradient(135deg, #22c55e 0%, #10b981 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px;">
                            <svg style="width: 40px; height: 40px; color: white;" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                        
                        <div class="form-eyebrow success-accent-text" data-field="success-eyebrow" style="color: #22c55e;">ANALYSIS REQUESTED</div>
                        <h2 data-field="success-headline" style="font-size: 32px; font-weight: 700; color: #1f2937; margin-bottom: 15px;">Thank you for starting your journey!</h2>
                        <p data-field="success-description" style="font-size: 16px; color: #6b7280; margin-bottom: 20px;">Our GTM operations experts are preparing your personalized capacity analysis. You'll receive your insights within 2-3 business days.</p>
                        
                        <p style="font-size: 12px; color: #9ca3af; margin-top: 20px;" data-field="contact-email">Questions? Contact hello@oneviewlabs.com</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Update form preview - WORKING VERSION
        function updateFormPreview() {
            console.log('updateFormPreview called');
            
            // Get all form values
            const formData = {
                'form-eyebrow': document.getElementById('form-eyebrow').value,
                'form-headline': document.getElementById('form-headline').value,
                'form-subheadline': document.getElementById('form-subheadline').value,
                'submit-text': document.getElementById('submit-text').value,
                'privacy-text': document.getElementById('privacy-text').value,
                'success-eyebrow': document.getElementById('success-eyebrow').value,
                'success-headline': document.getElementById('success-headline').value,
                'success-description': document.getElementById('success-description').value,
                'contact-email': 'Questions? Contact ' + document.getElementById('contact-email').value
            };
            
            // Update all elements with data-field attributes
            for (const [fieldName, value] of Object.entries(formData)) {
                const elements = document.querySelectorAll('[data-field="' + fieldName + '"]');
                elements.forEach(element => {
                    element.textContent = value;
                });
            }
            
            // Handle accent color changes  
            const accentColor = document.getElementById('accent-color').value;
            const formContainers = document.querySelectorAll('.form-container');
            
            formContainers.forEach(formContainer => {
                formContainer.classList.remove('accent-orange-red', 'accent-blue');
                
                if (accentColor === 'orange-red') {
                    formContainer.classList.add('accent-orange-red');
                } else if (accentColor === 'blue') {
                    formContainer.classList.add('accent-blue');
                }
            });
            
            // Handle field visibility based on selection
            const selectedFields = Array.from(document.getElementById('required-fields').selectedOptions).map(option => option.value);
            const allFieldOptions = ['first-name', 'last-name', 'email', 'company', 'title', 'phone', 'website', 'team-size', 'revenue'];
            
            allFieldOptions.forEach(field => {
                const fieldElements = document.querySelectorAll('[data-field="' + field + '"]');
                fieldElements.forEach(element => {
                    if (selectedFields.includes(field)) {
                        element.style.display = 'block';
                    } else {
                        element.style.display = 'none';
                    }
                });
            });
            
            // Handle two-column layout for first/last name
            const nameRow = document.querySelector('.form-row.two-col');
            if (selectedFields.includes('first-name') && selectedFields.includes('last-name')) {
                nameRow.style.display = 'grid';
                nameRow.style.gridTemplateColumns = '1fr 1fr';
            } else if (selectedFields.includes('first-name') || selectedFields.includes('last-name')) {
                nameRow.style.display = 'grid';
                nameRow.style.gridTemplateColumns = '1fr';
            } else {
                nameRow.style.display = 'none';
            }
            
            // Handle qualifying questions
            const question1 = document.getElementById('question-1').value;
            if (question1.trim()) {
                const q1Label = document.querySelector('[data-field="question-1-label"]');
                if (q1Label) q1Label.textContent = question1 + ' *';
                
                const q1Select = document.querySelector('[data-field="question-1-select"]');
                if (q1Select) {
                    const options = document.getElementById('question-1-options').value
                        .split('\n').map(opt => opt.trim()).filter(opt => opt);
                    q1Select.innerHTML = '<option value="">Select option</option>' + 
                        options.map(opt => '<option value="' + opt + '">' + opt + '</option>').join('');
                }
                
                const q1Element = document.querySelector('[data-field="question-1"]');
                if (q1Element) q1Element.style.display = 'block';
            } else {
                const q1Element = document.querySelector('[data-field="question-1"]');
                if (q1Element) q1Element.style.display = 'none';
            }
            
            // Visual feedback
            const button = document.querySelector('.update-btn');
            if (button) {
                button.textContent = '✅ Updated!';
                button.style.background = 'linear-gradient(135deg, #059669 0%, #047857 100%)';
                
                setTimeout(() => {
                    button.textContent = '✨ Update Form';
                    button.style.background = 'linear-gradient(135deg, #22c55e 0%, #10b981 100%)';
                }, 1500);
            }
        }
        
        // Download complete package (simplified but complete)
        async function downloadCompletePackage() {
            const button = document.querySelector('.download-btn');
            button.textContent = '📦 Creating Package...';
            button.disabled = true;
            
            try {
                const date = new Date().toISOString().slice(0, 10);
                
                // 1. Download Screenshot
                const formPreview = document.querySelector('.form-variations');
                const canvas = await html2canvas(formPreview, {
                    scale: 1,
                    useCORS: true,
                    backgroundColor: '#f9fafb'
                });
                
                const screenshotLink = document.createElement('a');
                screenshotLink.download = 'oneview-form-preview-' + date + '.png';
                screenshotLink.href = canvas.toDataURL();
                document.body.appendChild(screenshotLink);
                screenshotLink.click();
                document.body.removeChild(screenshotLink);
                
                // 2. Download Form Configuration (JSON)
                const formConfig = {
                    eyebrow: document.getElementById('form-eyebrow').value,
                    headline: document.getElementById('form-headline').value,
                    subheadline: document.getElementById('form-subheadline').value,
                    submitText: document.getElementById('submit-text').value,
                    privacyText: document.getElementById('privacy-text').value,
                    accentColor: document.getElementById('accent-color').value,
                    successEyebrow: document.getElementById('success-eyebrow').value,
                    successHeadline: document.getElementById('success-headline').value,
                    successDescription: document.getElementById('success-description').value,
                    contactEmail: document.getElementById('contact-email').value,
                    question1: document.getElementById('question-1').value,
                    question1Options: document.getElementById('question-1-options').value,
                    selectedFields: Array.from(document.getElementById('required-fields').selectedOptions).map(option => option.value),
                    generatedDate: date
                };
                
                const configBlob = new Blob([JSON.stringify(formConfig, null, 2)], { type: 'application/json' });
                const configUrl = URL.createObjectURL(configBlob);
                const configLink = document.createElement('a');
                configLink.download = 'oneview-form-config-' + date + '.json';
                configLink.href = configUrl;
                document.body.appendChild(configLink);
                configLink.click();
                document.body.removeChild(configLink);
                URL.revokeObjectURL(configUrl);
                
                // 3. Download HTML Template Instructions
                const selectedFields = Array.from(document.getElementById('required-fields').selectedOptions).map(option => option.value);
                const htmlInstructions = 'OneView Web-to-Lead Form HTML Template\\n\\n' +
                    'FORM CONFIGURATION:\\n' +
                    '- Form Headline: ' + formConfig.headline + '\\n' +
                    '- Form Eyebrow: ' + formConfig.eyebrow + '\\n' +
                    '- Submit Button: ' + formConfig.submitText + '\\n' +
                    '- Accent Color: ' + formConfig.accentColor + '\\n' +
                    '- Privacy Text: ' + formConfig.privacyText + '\\n\\n' +
                    'FORM FIELDS SELECTED:\\n' +
                    '- ' + selectedFields.join('\\n- ') + '\\n\\n' +
                    'SUCCESS PAGE CONFIGURATION:\\n' +
                    '- Success Eyebrow: ' + formConfig.successEyebrow + '\\n' +
                    '- Success Headline: ' + formConfig.successHeadline + '\\n' +
                    '- Success Description: ' + formConfig.successDescription + '\\n' +
                    '- Contact Email: ' + formConfig.contactEmail + '\\n\\n' +
                    (formConfig.question1 ? 'QUALIFYING QUESTION:\\n' + formConfig.question1 + '\\nOptions: ' + formConfig.question1Options.split('\\n').join(', ') + '\\n\\n' : '') +
                    'DESIGN NOTES:\\n' +
                    '- Clean white background for form content\\n' +
                    '- Consistent OneView branding throughout\\n' +
                    '- Mobile responsive design\\n\\n' +
                    'Generated: ' + date + ' from OneView ToolKit';
                
                const htmlBlob = new Blob([htmlInstructions], { type: 'text/plain' });
                const htmlUrl = URL.createObjectURL(htmlBlob);
                const htmlLink = document.createElement('a');
                htmlLink.download = 'oneview-form-config-' + date + '.txt';
                htmlLink.href = htmlUrl;
                document.body.appendChild(htmlLink);
                htmlLink.click();
                document.body.removeChild(htmlLink);
                URL.revokeObjectURL(htmlUrl);
                
                // 4. Download Salesforce Instructions
                const instructions = '# OneView Web-to-Lead Form - Salesforce Setup Instructions\\n\\n' +
                    '## Lead Assignment Setup\\n' +
                    '- Lead Owner: David Bresears\\n' +
                    '- Notifications: David Bresears, Sean Lee, Remington Rawlings\\n' +
                    '- Lead Source: Website Contact Form\\n' +
                    '- Daily Limit: 500 submissions\\n\\n' +
                    '## Form Configuration (from JSON file)\\n' +
                    '- Headline: ' + formConfig.headline + '\\n' +
                    '- CTA: ' + formConfig.submitText + '\\n' +
                    '- Accent Color: ' + formConfig.accentColor + '\\n' +
                    '- Selected Fields: ' + formConfig.selectedFields.join(', ') + '\\n' +
                    (formConfig.question1 ? '- Qualifying Question: ' + formConfig.question1 + '\\n' : '') +
                    '\\n## Setup Steps\\n' +
                    '1. Enable Web-to-Lead in Salesforce\\n' +
                    '2. Create assignment rule for David Bresears\\n' +
                    '3. Set up team notifications\\n' +
                    '4. Create custom fields for selected optional fields\\n' +
                    '5. Upload HTML files to web server\\n' +
                    '6. Test complete flow\\n\\n' +
                    'Generated: ' + date + ' from OneView ToolKit';
                
                const instructionsBlob = new Blob([instructions], { type: 'text/markdown' });
                const instructionsUrl = URL.createObjectURL(instructionsBlob);
                const instructionsLink = document.createElement('a');
                instructionsLink.download = 'salesforce-setup-' + date + '.md';
                instructionsLink.href = instructionsUrl;
                document.body.appendChild(instructionsLink);
                instructionsLink.click();
                document.body.removeChild(instructionsLink);
                URL.revokeObjectURL(instructionsUrl);
                
                button.textContent = '✅ Complete Package Downloaded! (4 files)';
                button.style.background = 'linear-gradient(135deg, #059669 0%, #047857 100%)';
                
                setTimeout(() => {
                    button.textContent = '📦 Download Complete Package';
                    button.style.background = 'linear-gradient(135deg, #3b82f6 0%, #06b6d4 100%)';
                    button.disabled = false;
                }, 3000);
                
            } catch (error) {
                console.error('Package creation failed:', error);
                button.textContent = '❌ Error - Try Again';
                setTimeout(() => {
                    button.textContent = '📦 Download Complete Package';
                    button.disabled = false;
                }, 2000);
            }
        }
        
        // Real-time updates (like hero tools)
        let updateTimeout;
        
        function attachEventListeners() {
            const inputs = document.querySelectorAll('#form-eyebrow, #form-headline, #form-subheadline, #submit-text, #privacy-text, #success-eyebrow, #success-headline, #success-description, #contact-email, #accent-color, #question-1, #question-1-options, #required-fields');
            
            inputs.forEach(input => {
                input.addEventListener('input', () => {
                    clearTimeout(updateTimeout);
                    updateTimeout = setTimeout(updateFormPreview, 300);
                });
                input.addEventListener('change', () => {
                    clearTimeout(updateTimeout);
                    updateTimeout = setTimeout(updateFormPreview, 100);
                });
            });
            
            console.log('Event listeners attached to ' + inputs.length + ' inputs');
        }
        
        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            console.log('DOM loaded, initializing...');
            attachEventListeners();
            updateFormPreview();
        });
    </script>
</body>
</html>
